{"version":3,"sources":["../src/regexMatcher.ts","../src/removeStartEndChars.ts"],"sourcesContent":["import { LLMOutputMatch, MaybeLLMOutputMatch } from \"@llm-ui/react\";\n\nconst regexMatchToLLmOutputMatch = (\n  regexMatch: RegExpMatchArray | null,\n): MaybeLLMOutputMatch => {\n  if (regexMatch) {\n    const matchString = regexMatch[0];\n    const startIndex = regexMatch.index!;\n    const endIndex = startIndex + matchString.length;\n    return {\n      startIndex,\n      endIndex,\n      outputRaw: matchString,\n    };\n  }\n  return undefined;\n};\n\nexport const regexMatcher =\n  (regex: RegExp) =>\n  (llmOutput: string): MaybeLLMOutputMatch => {\n    if (regex.global) {\n      throw new Error(\"regexMatcher does not support global regexes\");\n    }\n    return regexMatchToLLmOutputMatch(llmOutput.match(regex));\n  };\n\nexport const regexMatcherGlobal =\n  (regex: RegExp) =>\n  (llmOutput: string): LLMOutputMatch[] => {\n    if (!regex.global) {\n      throw new Error(\"regexMatcherGlobal does not support non-global regexes\");\n    }\n    const matches = Array.from(llmOutput.matchAll(regex));\n    if (!matches) {\n      return [];\n    }\n    return matches\n      .map((m) => regexMatchToLLmOutputMatch(m))\n      .filter((m) => m !== undefined) as LLMOutputMatch[];\n  };\n","type StartEndChars = {\n  startChar: string;\n  endChar: string;\n};\n\nexport const removeStartEndChars = (\n  str: string,\n  { startChar, endChar }: StartEndChars,\n) => {\n  return str.replaceAll(startChar, \"\").replaceAll(endChar, \"\");\n};\n"],"mappings":";AAEA,IAAM,6BAA6B,CACjC,eACwB;AACxB,MAAI,YAAY;AACd,UAAM,cAAc,WAAW,CAAC;AAChC,UAAM,aAAa,WAAW;AAC9B,UAAM,WAAW,aAAa,YAAY;AAC1C,WAAO;AAAA,MACL;AAAA,MACA;AAAA,MACA,WAAW;AAAA,IACb;AAAA,EACF;AACA,SAAO;AACT;AAEO,IAAM,eACX,CAAC,UACD,CAAC,cAA2C;AAC1C,MAAI,MAAM,QAAQ;AAChB,UAAM,IAAI,MAAM,8CAA8C;AAAA,EAChE;AACA,SAAO,2BAA2B,UAAU,MAAM,KAAK,CAAC;AAC1D;AAEK,IAAM,qBACX,CAAC,UACD,CAAC,cAAwC;AACvC,MAAI,CAAC,MAAM,QAAQ;AACjB,UAAM,IAAI,MAAM,wDAAwD;AAAA,EAC1E;AACA,QAAM,UAAU,MAAM,KAAK,UAAU,SAAS,KAAK,CAAC;AACpD,MAAI,CAAC,SAAS;AACZ,WAAO,CAAC;AAAA,EACV;AACA,SAAO,QACJ,IAAI,CAAC,MAAM,2BAA2B,CAAC,CAAC,EACxC,OAAO,CAAC,MAAM,MAAM,MAAS;AAClC;;;ACnCK,IAAM,sBAAsB,CACjC,KACA,EAAE,WAAW,QAAQ,MAClB;AACH,SAAO,IAAI,WAAW,WAAW,EAAE,EAAE,WAAW,SAAS,EAAE;AAC7D;","names":[]}